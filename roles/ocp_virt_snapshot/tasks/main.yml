---
# OCP Virtualization Snapshot Role - Main Entry Point

- name: Validate required variables
  ansible.builtin.assert:
    that:
      - vm_name is defined
      - vm_namespace is defined
    fail_msg: "Required variables (vm_name, vm_namespace) must be defined"

- name: Generate snapshot name from timestamp
  ansible.builtin.set_fact:
    snapshot_name: "aap-snapshot-{{ ansible_date_time.date | replace('-', '') }}-{{ ansible_date_time.hour }}{{ ansible_date_time.minute }}{{ ansible_date_time.second }}"

- name: Include create snapshot tasks
  ansible.builtin.include_tasks: create.yml
